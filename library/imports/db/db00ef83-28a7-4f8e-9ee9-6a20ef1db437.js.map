{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\Inimigo.js"],"names":["cc","Class","extends","Component","properties","alvo","Node","dano","Float","_movimentacao","_controleAnimacao","_gameOver","distanciaAtaque","onLoad","getComponent","audioMorte","AudioSource","find","node","on","morrer","update","dt","direcao","position","sub","distancia","mag","mudaAnimacao","setDirecao","andarPraFrente","emit","eventoMorte","Event","EventCustom","dispatchEvent","destroy"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAML,GAAGM,IADD;AAERC,cAAOP,GAAGQ,KAFF;AAGRC,uBAAgBT,GAAGG,SAHX;AAIRO,2BAAoBV,GAAGG,SAJf;AAKRQ,mBAAYX,GAAGM,IALP;AAMRM,yBAAkBZ,GAAGQ;;AANb,KAHP;;AAaLK,YAAQ,kBAAY;AAChB,aAAKJ,aAAL,GAAqB,KAAKK,YAAL,CAAkB,cAAlB,CAArB;AACA,aAAKJ,iBAAL,GAAyB,KAAKI,YAAL,CAAkB,oBAAlB,CAAzB;AACA,aAAKC,UAAL,GAAkB,KAAKD,YAAL,CAAkBd,GAAGgB,WAArB,CAAlB;;AAEA,aAAKX,IAAL,GAAYL,GAAGiB,IAAH,CAAQ,wBAAR,CAAZ;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA2B,KAAKC,MAAhC,EAAwC,IAAxC;AACH,KApBI;;AAsBLC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAIC,UAAU,KAAKlB,IAAL,CAAUmB,QAAV,CAAmBC,GAAnB,CAAuB,KAAKP,IAAL,CAAUM,QAAjC,CAAd;AACA,YAAIE,YAAYH,QAAQI,GAAR,EAAhB;AACA,aAAKjB,iBAAL,CAAuBkB,YAAvB,CAAoCL,OAApC,EAA6C,OAA7C;AACA,aAAKd,aAAL,CAAmBoB,UAAnB,CAA8BN,OAA9B;AACA,aAAKd,aAAL,CAAmBqB,cAAnB;;AAEA,YAAGJ,YAAY,KAAKd,eAApB,EAAoC;AACjC,iBAAKP,IAAL,CAAU0B,IAAV,CAAe,WAAf,EAA4B,EAACxB,MAAO,KAAKA,IAAb,EAA5B;AACF;AACJ,KAhCI;;AAkCLa,YAAS,kBAAU;AACf,YAAIY,cAAc,IAAIhC,GAAGiC,KAAH,CAASC,WAAb,CAAyB,aAAzB,EAAwC,IAAxC,CAAlB;AACA,aAAKhB,IAAL,CAAUiB,aAAV,CAAwBH,WAAxB;AACA,aAAKd,IAAL,CAAUkB,OAAV;AAEH;;AAvCI,CAAT","file":"Inimigo.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        alvo: cc.Node,\n        dano : cc.Float,\n        _movimentacao : cc.Component,\n        _controleAnimacao : cc.Component,\n        _gameOver : cc.Node,\n        distanciaAtaque : cc.Float,\n       \n    },\n\n    onLoad: function () {\n        this._movimentacao = this.getComponent(\"Movimentacao\");\n        this._controleAnimacao = this.getComponent(\"ControleDeAnimacao\");\n        this.audioMorte = this.getComponent(cc.AudioSource);\n       \n        this.alvo = cc.find(\"Personagens/Personagem\");\n        this.node.on(\"SofrerDano\", this.morrer, this);\n    },\n\n    update: function (dt) {\n        let direcao = this.alvo.position.sub(this.node.position);\n        let distancia = direcao.mag();\n        this._controleAnimacao.mudaAnimacao(direcao, \"Andar\");\n        this._movimentacao.setDirecao(direcao);\n        this._movimentacao.andarPraFrente();\n        \n        if(distancia < this.distanciaAtaque){\n           this.alvo.emit(\"SofreDano\", {dano : this.dano});\n        }\n    },\n    \n    morrer : function(){\n        let eventoMorte = new cc.Event.EventCustom(\"ZumbiMorreu\", true);\n        this.node.dispatchEvent(eventoMorte);\n        this.node.destroy();\n   \n    }\n    \n    \n    \n    \n    \n    \n});\n"]}