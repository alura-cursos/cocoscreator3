{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\Jogador.js"],"names":["cc","Class","extends","Component","properties","_direcao","Vec2","tiro","Prefab","_movimentacao","_controleAnimacao","_canvas","Canvas","_camera","Node","vivo","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","teclaPressionada","KEY_UP","teclaSolta","getComponent","find","atirar","mudarDirecaoDaAnimcao","update","deltaTime","setDirecao","andarPraFrente","event","direcao","calcularDirecaoMouse","estado","mag","mudaAnimacao","posicaoMouse","getLocation","x","y","convertToNodeSpaceAR","posicaoJogadora","node","position","sub","disparo","instantiate","parent","keyCode","KEY","a","d","w","s"],"mappings":"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","file":"Jogador.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _direcao : cc.Vec2,\n        tiro : cc.Prefab,\n        _movimentacao : cc.Component,\n        _controleAnimacao : cc.Component,\n        _canvas : cc.Canvas,\n        _camera : cc.Node,\n        vivo : true,\n\n    },\n\n\n    onLoad: function () {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.teclaPressionada, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.teclaSolta, this);\n        this._movimentacao = this.getComponent(\"Movimentacao\");\n        this._controleAnimacao = this.getComponent(\"ControleDeAnimacao\");\n        this._canvas = cc.find(\"Canvas\");\n        this._canvas.on(\"mousedown\", this.atirar, this);\n        this._canvas.on(\"mousemove\", this.mudarDirecaoDaAnimcao, this);\n        this._camera = cc.find(\"Camera\");\n        this.vivo = true;\n\n    },\n    \n    update: function (deltaTime) {\n        this._movimentacao.setDirecao(this._direcao);\n        this._movimentacao.andarPraFrente();\n\n    },\n\n    mudarDirecaoDaAnimcao : function(event){\n        let direcao = this.calcularDirecaoMouse(event);\n        let estado;\n        if(this._direcao.mag() == 0){\n            estado = \"Parado\";\n        }else{\n            estado = \"Andar\";\n        }\n        this._controleAnimacao.mudaAnimacao(direcao, estado);\n    },\n\n    calcularDirecaoMouse : function(event){\n        let posicaoMouse = event.getLocation();\n        posicaoMouse = new cc.Vec2(posicaoMouse.x, posicaoMouse.y);\n        posicaoMouse = this._canvas.convertToNodeSpaceAR(posicaoMouse);\n        let posicaoJogadora = this._camera.convertToNodeSpaceAR(this.node.position);\n        \n        let direcao = posicaoMouse.sub(posicaoJogadora);\n        return direcao;\n    },\n\n    atirar : function(event){\n        let direcao = this.calcularDirecaoMouse(event);\n        let disparo = cc.instantiate(this.tiro);  \n        disparo.parent = this.node.parent;\n        disparo.position = this.node.position;\n        disparo.getComponent(\"Movimentacao\").setDirecao(direcao);\n    },\n\n    teclaPressionada : function(event){\n\n        if(event.keyCode == cc.KEY.a){\n            this._direcao.x = -1;\n        }\n        if(event.keyCode == cc.KEY.d){\n            this._direcao.x = 1;\n        }\n\n        if(event.keyCode == cc.KEY.w){\n            this._direcao.y = 1;\n        }\n        if(event.keyCode == cc.KEY.s){\n            this._direcao.y = -1;\n        }\n    },\n\n\n    teclaSolta : function(event){\n        if(event.keyCode == cc.KEY.a){\n            this._direcao.x = 0;\n        }\n        if(event.keyCode == cc.KEY.d){\n            this._direcao.x = 0;\n        }\n\n        if(event.keyCode == cc.KEY.w){\n            this._direcao.y = 0;\n        }\n        if(event.keyCode == cc.KEY.s){\n            this._direcao.y = 0;\n        }\n    }\n\n});\n"]}